!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=n||self).component=e()}(this,function(){"use strict";function r(n,e){for(var o=0;o<e.length;o++){var t=e[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function u(n){if(void 0!==n&&0!==n.length)return 1===n.length?n[0]:n}function l(n){var e,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return void 0===(e=o.querySelectorAll(n))?e:e instanceof Array?e:e.callee||e instanceof NodeList||e instanceof DOMTokenList?Array.prototype.slice.call(e):[e]}return function(){function e(n){var t,r,f,a;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=n.el,n.options&&(this.options=n.options),n.ui&&(this.ui=(t=n.ui,r=n.el,Object.keys(t).reduce(function(n,e){var o=u(l(t[e].selector||t[e],r));if(o)n[e]=o;else if(!t[e].optional)throw new Error("[!!] [Component] Cant't find UI element for selector: ".concat(t[e]));return n},{}))),n.components&&(this.components=(f=n.components,a=n.el,Object.keys(f).reduce(function(n,e){var o=f[e],t=o.type,r=o.selector,i=o.options,c=o.optional;if("string"!=typeof r||!t)throw new Error("[!!] [Component] Invalid component configuration for key: ".concat(e));var s=u(l(r,a));if(s)n[e]=Array.isArray(s)?s.map(function(n){return new t({el:n,options:i})}):new t({el:s,options:i});else if(!c)throw new Error("[!!] [Component] Cant't find node with selector ".concat(r," for sub-component: ").concat(e));return n},{})))}var n,o,t;return n=e,(o=[{key:"destroy",value:function(){var e=this;this.components&&Object.keys(this.components).forEach(function(n){return(e.components[n].length?e.components[n]:[e.components[n]]).forEach(function(n){return n.destroy()})}),this.onDestroy&&this.onDestroy()}}])&&r(n.prototype,o),t&&r(n,t),e}()});
