{"version":3,"file":"index.esm.js","sources":["../index.js"],"sourcesContent":["/**\n * @module EventEmitter\n * @description Emits events that can be listened and unlistened to\n * @example\n * import EventEmitter from '@okiba/event-emitter'\n * const emitter = new EventEmitter\n * emitter.on('log', console.log)\n * emitter.emit('log', 'Silence is deprecated')\n * // Logs: 'Silence is deprecated'\n *\n * emitter.off('log', console.log)\n * emitter.emit('log', 'Will not run')\n * // ...Nothing happens\n */\nclass EventEmitter {\n  constructor() {\n    this.hs = {}\n  }\n\n  /**\n   * Sets an event listener for an event type\n   * @param  {String} name    Event type\n   * @param  {Function} handler Callback to be fired when that event occours\n   */\n  on(name, handler) {\n    (\n      this.hs[name] || (this.hs[name] = [])\n    ).push(handler)\n  }\n\n  /**\n   * Unsets an event listener for an event type\n   * @param  {String} name    Event type\n   * @param  {Function} handler Callback previously registered for that event type\n   */\n  off(name, handler) {\n    if (!this.hs[name]) return\n\n    const i = this.hs[name].indexOf(handler)\n    if (i < 0) return\n\n    this.hs[name].splice(i, 1)\n  }\n\n  /**\n   * Triggers an event with optional data attached.\n   * All listeners will be triggered in registration order.\n   * Custom data will be passed to them as a parameter\n   * @param  {String} name Event type\n   * @param  {Object} [data] Custom data to be passed to the handlers\n   */\n  emit(name, data) {\n    if (!this.hs || !this.hs[name]) return\n\n    for (let i = 0; i < this.hs[name].length; ++i) {\n      this.hs[name][i](data)\n    }\n  }\n\n  /**\n   * Removes all event listeners and deletes the handlers object\n   */\n  destroy() {\n    Object.entries(this.hs)\n      .forEach(\n        ([name, handlers]) =>\n          handlers.forEach(\n            handler => this.off(name, handler)\n          )\n      )\n\n    delete this.hs\n  }\n}\n\nexport default EventEmitter\n"],"names":["EventEmitter","hs","name","handler","push","i","indexOf","splice","data","length","Object","entries","forEach","handlers","off"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;;IAcMA;;;0BACU;;;SACPC,EAAL,GAAU,EAAV;;;;;;;;;;;uBAQCC,MAAMC,SAAS;OAEd,KAAKF,EAAL,CAAQC,IAAR,MAAkB,KAAKD,EAAL,CAAQC,IAAR,IAAgB,EAAlC,CADF,EAEEE,IAFF,CAEOD,OAFP;;;;;;;;;;wBAUED,MAAMC,SAAS;UACb,CAAC,KAAKF,EAAL,CAAQC,IAAR,CAAL,EAAoB;UAEdG,CAAC,GAAG,KAAKJ,EAAL,CAAQC,IAAR,EAAcI,OAAd,CAAsBH,OAAtB,CAAV;UACIE,CAAC,GAAG,CAAR,EAAW;WAENJ,EAAL,CAAQC,IAAR,EAAcK,MAAd,CAAqBF,CAArB,EAAwB,CAAxB;;;;;;;;;;;;yBAUGH,MAAMM,MAAM;UACX,CAAC,KAAKP,EAAN,IAAY,CAAC,KAAKA,EAAL,CAAQC,IAAR,CAAjB,EAAgC;;WAE3B,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKJ,EAAL,CAAQC,IAAR,EAAcO,MAAlC,EAA0C,EAAEJ,CAA5C,EAA+C;aACxCJ,EAAL,CAAQC,IAAR,EAAcG,CAAd,EAAiBG,IAAjB;;;;;;;;;8BAOM;;;MACRE,MAAM,CAACC,OAAP,CAAe,KAAKV,EAApB,EACGW,OADH,CAEI;;YAAEV,IAAF;YAAQW,QAAR;;eACEA,QAAQ,CAACD,OAAT,CACE,UAAAT,OAAO;iBAAI,KAAI,CAACW,GAAL,CAASZ,IAAT,EAAeC,OAAf,CAAJ;SADT,CADF;OAFJ;aAQO,KAAKF,EAAZ;;;;;;;;;"}