var OkibaDragEmitter=function(s,u){"use strict";function r(t,o){for(var n=0;n<o.length;n++){var e=o[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,o){return(c=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}function a(t,o){return!o||"object"!=typeof o&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):o}return s=s&&s.hasOwnProperty("default")?s.default:s,function(t){function n(t){var o;return function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,n),(o=a(this,h(n).call(this))).el=t,o.autoBind(),o.listen(),o}var o,e,i;return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&c(t,o)}(n,s),o=n,(e=[{key:"destroy",value:function(){this.unlisten(),this.el=null}},{key:"setPointerDown",value:function(t){var o=t.clientX,n=t.clientY;this.pointerX=o,this.pointerY=n,this.isPointerDown=!0,this.el.classList.add("is-pointer-down")}},{key:"setPointerUp",value:function(){this.isPointerDown&&(this.isPointerDown=!1,this.pointerX=this.pointerY=null,this.el.classList.remove("is-pointer-down"),this.emit("dragend"))}},{key:"setPointerPos",value:function(t,o){this.isPointerDown&&this.emitDrag(t,o),this.pointerX=t,this.pointerY=o}},{key:"emitDrag",value:function(t,o){this.emit("drag",{deltaX:this.pointerX-t,clientX:t,deltaY:this.pointerY-o,clientY:o})}},{key:"onTouchStart",value:function(t){this.setPointerDown(t.touches[0])}},{key:"onTouchMove",value:function(t){this.setPointerPos(t.touches[0].clientX,t.touches[0].clientY)}},{key:"onTouchEnd",value:function(){this.setPointerUp()}},{key:"onMouseDown",value:function(t){this.setPointerDown(t)}},{key:"onMouseMove",value:function(t){this.setPointerPos(t.clientX,t.clientY)}},{key:"onMouseUp",value:function(){this.setPointerUp()}},{key:"listen",value:function(){u.on(this.el,"touchstart",this.onTouchStart),u.on(window,"touchmove",this.onTouchMove),u.on(window,"touchend",this.onTouchEnd),u.on(this.el,"mousedown",this.onMouseDown),u.on(window,"mousemove",this.onMouseMove),u.on(window,"mouseup",this.onMouseUp)}},{key:"unlisten",value:function(){u.off(this.el,"touchstart",this.onTouchStart),u.off(window,"touchmove",this.onTouchMove),u.off(window,"touchend",this.onTouchEnd),u.off(this.el,"mousedown",this.onMouseDown),u.off(window,"mousemove",this.onMouseMove),u.off(window,"mouseup",this.onMouseUp)}},{key:"autoBind",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this)}}])&&r(o.prototype,e),i&&r(o,i),n}()}(EventEmitter,dom);
