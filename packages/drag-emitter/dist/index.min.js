var OkibaDragEmitter=function(t,o){"use strict";function e(t,o){for(var n=0;n<o.length;n++){var e=o[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function s(t,o){return(s=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t})(t,o)}function u(t,o){return!o||"object"!=typeof o&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):o}return t=t&&t.hasOwnProperty("default")?t.default:t,function(){function n(t){var o;return function(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this,n),(o=u(this,i(n).call(this))).el=t,o.autoBind(),o.listen(),o}return function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),o&&s(t,o)}(n,t),function(t,o,n){o&&e(t.prototype,o),n&&e(t,n)}(n,[{key:"destroy",value:function(){this.unlisten(),this.el=null}},{key:"setPointerDown",value:function(t){var o=t.clientX,n=t.clientY;this.pointerX=o,this.pointerY=n,this.isPointerDown=!0,this.el.classList.add("is-pointer-down")}},{key:"setPointerUp",value:function(){this.isPointerDown&&(this.isPointerDown=!1,this.pointerX=this.pointerY=null,this.el.classList.remove("is-pointer-down"),this.emit("dragend"))}},{key:"setPointerPos",value:function(t,o){this.isPointerDown&&this.emitDrag(t,o),this.pointerX=t,this.pointerY=o}},{key:"emitDrag",value:function(t,o){this.emit("drag",{deltaX:this.pointerX-t,clientX:t,deltaY:this.pointerY-o,clientY:o})}},{key:"onTouchStart",value:function(t){this.setPointerDown(t.touches[0])}},{key:"onTouchMove",value:function(t){this.setPointerPos(t.touches[0].clientX,t.touches[0].clientY)}},{key:"onTouchEnd",value:function(){this.setPointerUp()}},{key:"onMouseDown",value:function(t){this.setPointerDown(t)}},{key:"onMouseMove",value:function(t){this.setPointerPos(t.clientX,t.clientY)}},{key:"onMouseUp",value:function(){this.setPointerUp()}},{key:"listen",value:function(){o.on(this.el,"touchstart",this.onTouchStart),o.on(window,"touchmove",this.onTouchMove),o.on(window,"touchend",this.onTouchEnd),o.on(this.el,"mousedown",this.onMouseDown),o.on(window,"mousemove",this.onMouseMove),o.on(window,"mouseup",this.onMouseUp)}},{key:"unlisten",value:function(){o.off(this.el,"touchstart",this.onTouchStart),o.off(window,"touchmove",this.onTouchMove),o.off(window,"touchend",this.onTouchEnd),o.off(this.el,"mousedown",this.onMouseDown),o.off(window,"mousemove",this.onMouseMove),o.off(window,"mouseup",this.onMouseUp)}},{key:"autoBind",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this)}}]),n}()}(EventEmitter,dom);
